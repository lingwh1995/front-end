<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>dom节点增删改查</title>
  <script type="text/javascript">
    window.onload = () => {
      /**
       * 获取当前元素
       */ 
      document.querySelectorAll('button')[0].onclick = () => {
        let p = document.querySelector('#p')
        //打印p标签的内容
        console.log(p.innerText)
      }


      /**
       * 获取当前元素父节点
       */ 
      document.querySelectorAll('button')[1].onclick = () => {
        //获取p元素
        let pElement = document.querySelector('#p')
        //根据p元素，获取p元素的父元素
        let pParentElement = pElement.parentElement
        let pParentNode= pElement.parentNode
        //打印父元素
        console.log(pParentElement)
        console.log(pParentNode)
      }


      /**
       * 获取所有子元素
       */
      document.querySelectorAll('button')[2].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取div元素的所有的子元素
        let childNodes = div.childNodes
        for (let i = 0; i < childNodes.length; i++) {
          //打印所有子元素的节点名称
          console.log(childNodes[i].nodeName)
        }
      }


      /**
       * 获取所有子节点
       *  childNodes获取所有子节点,包含文本节点，注释节点等，元素节点等；
       *  children的区别是children只返回元素节点，但children不是W3c标准，兼容性不好；
       */
      document.querySelectorAll('button')[3].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取div元素的所有的子元素
        let children = div.children
        for (let i = 0; i < children.length; i++) {
          //打印所有子节点的文本
          console.log(children[i].innerText)
        }
      }


      /**
       * 获取所有子节点个数
       */
      document.querySelectorAll('button')[4].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取所有子节点个数方式一
        console.log(`获取所有子节点个数方式一：${div.childElementCount}`)

        //获取所有子节点个数方式二
        console.log(`获取所有子节点个数方式二：${div.children.length}`)
      }


      /**
       * 获取第一个子节点
       */
      document.querySelectorAll('button')[5].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取第一个子节点
        const firstElementChild = div.firstElementChild
        //打印节点内容
        console.log(firstElementChild.innerText)
      }


      /**
       * 获取最后一个子节点
       */
      document.querySelectorAll('button')[6].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取最后一个子节点
        const lastElementChild = div.lastElementChild
        //打印节点内容
        console.log(lastElementChild.innerText)
      }


      /**
       * 获取前一个兄弟节点
       */
      document.querySelectorAll('button')[7].onclick = () => {
        //获取当前p节点
        let p = document.querySelector('#p')
        //获取p元素的前一个子节点
        const prev = p.previousElementSibling
        //打印前一个兄弟节点的文本
        console.log(prev.innerText)
      }


      /**
       * 获取后一个兄弟节点
       */
      document.querySelectorAll('button')[8].onclick = () => {
        //获取当前p节点
        let p = document.querySelector('#p')
        //获取p元素的后一个子节点
        const next = p.nextElementSibling
        //打印后一个兄弟节点的文本
        console.log(next.innerText)
      }


      /**
       * 删除最后一个子节点方式1(通过父元素删除-推荐使用)
       */
      document.querySelectorAll('button')[9].onclick = () => {
        //获取当前div元素
        let div = document.querySelector('div')
        //获取最后一个子节点
        let lastPNode = document.querySelector('#last-p')
        //一般通过父元素parent来调用removeChild
        div.removeChild(lastPNode)
      }

      /**
       * 删除最后一个子节点方式2(通过.remove()直接删除-可以使用)
       */
      document.querySelectorAll('button')[10].onclick = () => {
        //获取最后一个子节点
        let lastPNode = document.querySelector('#last-p')
        //不需要通过parent调用来删除，直接自删除，无返回值
        lastPNode.remove()
      }

      /**
       * 删除最后一个子节点方式3(通过innerHTML=''删除-不推荐使用)
       */
      document.querySelectorAll('button')[11].onclick = () => {
        //获取最后一个子节点
        let lastPNode = document.querySelector('#last-p')
        lastPNode.innerHTML = ''
      }


      /**
       * 创建元素节点
       */
      document.querySelectorAll('button')[12].onclick = () => {
        //获取当前div元素
        const div = document.querySelector('div')
        //创建一个元素节点
        const newElement = document.createElement('p')
        //给创建的元素节点设置文本值
          //方式一
        // newElement.textContent='我是创建的元素节点'
          //方式二
        newElement.innerText = '我是创建的元素节点'
        //给创建的元素节点设置属性值
          //方式一
        //newElement.setAttribute('title','create')
          //方式二
        newElement.title = 'create'
        //把创建的元素节点添加到div中
        div.appendChild(newElement)
      } 


      /**
       * 创建文本节点
       */
      document.querySelectorAll('button')[13].onclick = () => {
        //获取当前div元素
        const div = document.querySelector('div')
        //创建一个文本节点
        const newTextNode = document.createTextNode('我是创建的文本节点')
        //把创建文本节点添加到div中
        div.appendChild(newTextNode)
      } 


      /**
       * 创建文档碎片
       *  可以理解为一个创建一个中间容器，我们可以往这个容器里面添加很多的元素，然后通过容器把这些元素一次性挂载到DOM中去。
       *  即当把DocumentFragment插入DOM时，插入的不是其本身，而是其所有的子孙节点
       */
      document.querySelectorAll('button')[14].onclick = () => {
        //获取当前div元素
        const div = document.querySelector('div')
        //创建一个文档碎片
        const documentFragment = document.createDocumentFragment()

        //创建文档碎片第一个子节点
        const h1 = document.createElement("h1")
        h1.textContent = '我是创建的文档碎片中的 h1'
        //把子节点添加到文档碎片中
        documentFragment.appendChild(h1)

        //创建文档碎片第二个子节点
        const h2 = document.createElement("h2")
        h2.textContent = '我是创建的文档碎片中的 h2'
        //把子节点添加到文档碎片中
        documentFragment.appendChild(h2)

        //创建文档碎片第三个子节点
        const h3 = document.createElement("h3")
        h3.textContent = '我是创建的文档碎片中的 h3'
        //把子节点添加到文档碎片中
        documentFragment.appendChild(h3)

        //把文档碎片添加到div中
        div.appendChild(documentFragment)
      }


      /**
       * 修改子节点内容innerText、innerHTML和TextContent
       *  1.textContent和innerHTML可以重新渲染样式，innerText只能修改文本内容
       *  2.innerText和textContent用法效果是一样的
       */
      document.querySelectorAll('button')[15].onclick = () => {
        //获取当前k元素
        let k = document.querySelector('#k')
        //只能更改文本
        //k.textContent = 'This is a k'
        
        //只能更改文本
        //k.innerText = 'This is a k'

        //可以重新渲染样式
        k.innerHTML = '<span style="color:red;font-size:50px;">This is a k</span>'
      }
    }
  </script>
</head>
<body>
  <button>获取当前元素-[button-0]</button>
  <button>获取当前元素父节点-[button-1]</button>
  <button>获取所有子元素-[button-2]</button>
  <button>获取所有子节点-[button-3]</button><br>
  <button>获取所有子节点个数-[button-4]</button>
  <button>获取第一个子节点-[button-5]</button>
  <button>获取最后一个子节点-[button-6]</button>
  <button>获取前一个兄弟节点-[button-7]</button>
  <button>获取后一个兄弟节点-[button-8]</button><br>
  <button>删除最后一个子节点方式1(通过父元素删除-推荐使用)-[button-9]</button>
  <button>删除最后一个子节点方式2(通过.remove()直接删除-可以使用)-[button-10]</button>
  <button>删除最后一个子节点方式3(通过innerHTML=''删除-不推荐使用)-[button-11]</button><br>
  <button>创建元素节点-[button-12]</button>
  <button>创建文本节点-[button-13]</button>
  <button>创建文档碎片-[button-14]</button>
  <button>修改子节点内容innerText、innerHTML和TextContent-[button-15]</button>
  <div>
    <p>我是第一个子节点</p>
    <p>我是p元素的前一个兄弟节点</p>
    <p id="p">我是p元素</p>
    <p>我是p元素的后一个兄弟节点</p>
    <k id="k"></k>
    <p id="last-p">我是最后一个子节点</p>
  </div>
</body>
</html>