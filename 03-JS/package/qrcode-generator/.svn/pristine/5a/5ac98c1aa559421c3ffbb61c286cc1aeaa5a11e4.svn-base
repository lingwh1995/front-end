"use strict";(self["webpackChunkqrcode_generator_webui"]=self["webpackChunkqrcode_generator_webui"]||[]).push([[569],{6994:function(e,t,l){l.d(t,{Jp:function(){return n},Wq:function(){return d},Zp:function(){return o},iM:function(){return i},w_:function(){return c},yo:function(){return u}});var a=l(2730);function d(e){return(0,a.A)({url:`/dict/scheme_id/${e.schemeId}/level/${e.level}`,method:"GET"})}function n(e){return(0,a.A)({url:`/dict/scheme_id/${e.schemeId}`,method:"GET"})}function i(e){return(0,a.A)({url:"/dict",method:"POST",data:e})}function c(e){return(0,a.A)({url:`/dict/recursive/${e}`,method:"DELETE"})}function o(e){return(0,a.A)({url:`/dict/scheme_id/${e.schemeId}/dict_code/${e.dictCode}`,method:"GET"})}function u(e){return(0,a.A)({url:"/dict",method:"PUT",data:e})}},3075:function(e,t,l){l.d(t,{G:function(){return n}});var a=l(8626),d=l.n(a);const n=e=>d().cloneDeep(e)},5950:function(e,t,l){l.r(t),l.d(t,{default:function(){return f}});var a=l(6768);const d={class:"custom-tree-container",style:{height:"650px",overflow:"scroll"}},n={class:"dialog-footer"};function i(e,t,l,i,c,o){const u=(0,a.g2)("el-option"),r=(0,a.g2)("el-select"),s=(0,a.g2)("el-form-item"),p=(0,a.g2)("el-col"),m=(0,a.g2)("el-row"),h=(0,a.g2)("el-tree"),f=(0,a.g2)("el-input"),b=(0,a.g2)("el-switch"),k=(0,a.g2)("el-form"),g=(0,a.g2)("el-button"),y=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{span:20,style:{"padding-left":"20px","padding-right":"20px","padding-top":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"选择方案"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:i.conditions.schemeId,"onUpdate:modelValue":t[0]||(t[0]=e=>i.conditions.schemeId=e),placeholder:"请选择方案",onChange:i.handleSchemeOptionsChange},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.schemeOptions,((e,t)=>((0,a.uX)(),(0,a.Wv)(u,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1}),(0,a.bF)(m,{style:{"padding-left":"20px","padding-right":"20px"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{span:20},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"字典数据"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bF)(h,{data:i.dictTreeData,"expand-on-click-node":!1,"render-content":i.renderContent,"node-key":"id","default-expanded-keys":[i.defaultExpandedKeys]},null,8,["data","render-content","default-expanded-keys"])])])),_:1})])),_:1})])),_:1}),(0,a.bF)(y,{modelValue:i.addOrEditDictDialogTableVisible,"onUpdate:modelValue":t[6]||(t[6]=e=>i.addOrEditDictDialogTableVisible=e),title:i.addOrEditTreeDictDialogTitle,width:"500"},{footer:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.bF)(g,{onClick:t[5]||(t[5]=e=>i.addOrEditDictDialogTableVisible=!1)},{default:(0,a.k6)((()=>[(0,a.eW)("取消")])),_:1}),"ADD"==i.addOrEditTreeDictOperateType?((0,a.uX)(),(0,a.Wv)(g,{key:0,type:"primary",onClick:i.handleAddDict},{default:(0,a.k6)((()=>[(0,a.eW)(" 保存 ")])),_:1},8,["onClick"])):(0,a.Q3)("",!0),"UPDATE"==i.addOrEditTreeDictOperateType?((0,a.uX)(),(0,a.Wv)(g,{key:1,type:"primary",onClick:i.handleUpdateDict},{default:(0,a.k6)((()=>[(0,a.eW)(" 更新 ")])),_:1},8,["onClick"])):(0,a.Q3)("",!0)])])),default:(0,a.k6)((()=>[(0,a.bF)(k,{model:i.dict},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"请输入字典名称","label-width":e.formLabelWidth},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:i.dict.dictName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dict.dictName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,a.bF)(s,{label:"请输入字典数据","label-width":e.formLabelWidth},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:i.dict.dictData,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dict.dictData=e),autocomplete:"off",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,a.bF)(s,{label:"请输入字典描述","label-width":e.formLabelWidth},{default:(0,a.k6)((()=>[(0,a.bF)(f,{modelValue:i.dict.dictDesc,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dict.dictDesc=e),autocomplete:"off",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,a.bF)(s,{label:"请选择字典类型状态","label-width":e.formLabelWidth},{default:(0,a.k6)((()=>[(0,a.bF)(b,{modelValue:i.dict.dictStatus,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dict.dictStatus=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])],64)}l(4114);var c=l(144),o=l(6994),u=l(5133),r=l(1219),s=l(3075),p={name:"Dict",setup(){const e=(0,c.KR)(!1),t=(0,c.KR)("新增字典"),l=(0,c.KR)("ADD"),d={id:null,dictName:null,dictCode:null,dictData:null,dictSort:null,dictDesc:null,dictStatus:!0,parentId:null,level:null,schemeId:null},n=(0,c.Kh)((0,s.G)(d)),i=(0,c.KR)([]),p=(0,c.Kh)({schemeId:null}),m=(0,c.KR)([]),h=(0,c.KR)([]),f=async()=>{try{const e=await(0,u.or)(),t=e.data.data;t.forEach((e=>{i.value.push({label:e.schemeName,value:e.schemeId})}))}catch(e){console.log(e)}},b=async()=>{const e=await(0,o.Jp)(p);"200"==e.data.code?m.value=[e.data.data]:(0,r.nk)({message:"根据方案加载树失败",type:"error",plain:!0})};(0,a.sV)((()=>{f(),p.schemeId}));const k=async()=>{e.value=!1;const t=await(0,o.iM)(n);let l=null;"200"==t.data.code?((0,r.nk)({message:"新增字典数据成功",type:"success",plain:!0}),l=t.data.data.id):(0,r.nk)({message:"新增字典数据失败",type:"error",plain:!0}),b(),h.value=l},g=async()=>{e.value=!1;const t=await(0,o.yo)(n);let l=null;"200"==t.data.code?((0,r.nk)({message:"更新字典数据成功",type:"success",plain:!0}),l=t.data.data.id):(0,r.nk)({message:"根新字典数据失败",type:"error",plain:!0}),b(),h.value=l},y=a=>{e.value=!0,t.value="新增字典类型",l.value="ADD",n.dictSort=null==a.children?1:a.children.length+1,n.parentId=a.id,n.level=a.level+1,n.schemeId=p.schemeId},D=a=>{e.value=!0,t.value="编辑字典类型",l.value="UPDATE";const i=(0,c.Kh)((0,s.G)(d));i.id=a.id,i.dictName=a.label,i.dictData=a.data,i.dictDesc=a.desc,i.dictStatus="0"==a.status,Object.keys(n).forEach((e=>{n[e]=i[e]}))},v=async(e,t)=>{const l=e.parent,a=l.data.children||l.data,d=a.findIndex((e=>e.id===t.id));a.splice(d,1);const n=await(0,o.w_)(t.id);"200"==n.data.code?(0,r.nk)({message:`删除节点${t.dictName}及子结点数据成功`,type:"success",plain:!0}):(0,r.nk)({message:`删除节点${t.dictName}及子结点数据失败`,type:"error",plain:!0})},w=(e,{node:t,data:l,store:a})=>e("span",{class:"custom-tree-node"},e("span",{style:""},t.label),e("span",null,e("span",{style:"display:inline-block;text-align:left;width:300px;"},l.data),e("span",{style:"display:inline-block;text-align:left;width:450px;"},l.desc),e("a",{style:"margin-right:10px;",onClick:()=>y(l)},"增加节点 "),e("a",{style:"margin-right:10px;",onClick:()=>D(l)},"编辑节点 "),e("a",{style:"",onClick:()=>v(t,l)},"删除节点"))),_=async()=>{await b(),h.value=m.value[0].id};return(0,a.wB)(e,((e,t)=>{if(!e){const e=(0,c.Kh)((0,s.G)(d));Object.keys(n).forEach((t=>{n[t]=e[t]}))}})),{dictTreeData:m,renderContent:w,addOrEditDictDialogTableVisible:e,handleAddDict:k,handleUpdateDict:g,dict:n,conditions:p,handleSchemeOptionsChange:_,schemeOptions:i,addOrEditTreeDictDialogTitle:t,addOrEditTreeDictOperateType:l,defaultExpandedKeys:h}}},m=l(1241);const h=(0,m.A)(p,[["render",i]]);var f=h}}]);
//# sourceMappingURL=569.31fd36a6.js.map