"use strict";(self["webpackChunkqrcode_generator_webui"]=self["webpackChunkqrcode_generator_webui"]||[]).push([[336],{6336:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});var t=l(6768);const n={class:"dialog-footer"},o={style:{"margin-top":"10px"}};function s(e,a,l,s,r,m){const i=(0,t.g2)("el-input"),c=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-switch"),u=(0,t.g2)("el-form"),p=(0,t.g2)("el-button"),h=(0,t.g2)("el-dialog"),g=(0,t.g2)("el-col"),b=(0,t.g2)("el-row"),f=(0,t.g2)("el-table-column"),k=(0,t.g2)("el-table"),y=(0,t.g2)("el-pagination");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(h,{modelValue:s.schemeDialogTableVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>s.schemeDialogTableVisible=e),title:s.dialogTitle,width:"500"},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",n,[(0,t.bF)(p,{onClick:a[3]||(a[3]=e=>s.schemeDialogTableVisible=!1)},{default:(0,t.k6)((()=>[(0,t.eW)("取消")])),_:1}),"ADD"==s.operateType?((0,t.uX)(),(0,t.Wv)(p,{key:0,type:"primary",onClick:s.handleAddScheme},{default:(0,t.k6)((()=>[(0,t.eW)(" 保存 ")])),_:1},8,["onClick"])):(0,t.Q3)("",!0),"UPDATE"==s.operateType?((0,t.uX)(),(0,t.Wv)(p,{key:1,type:"primary",onClick:s.handleUpdateScheme},{default:(0,t.k6)((()=>[(0,t.eW)(" 更新 ")])),_:1},8,["onClick"])):(0,t.Q3)("",!0)])])),default:(0,t.k6)((()=>[(0,t.bF)(u,{model:s.scheme,rules:s.rules,ref:"schemeFormRef"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"方案名称",prop:"schemeName","label-width":s.formLabelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:s.scheme.schemeName,"onUpdate:modelValue":a[0]||(a[0]=e=>s.scheme.schemeName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.bF)(c,{label:"方案备注","label-width":s.formLabelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:s.scheme.schemeComments,"onUpdate:modelValue":a[1]||(a[1]=e=>s.scheme.schemeComments=e),autocomplete:"off",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.bF)(c,{label:"启用状态","label-width":s.formLabelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:s.scheme.schemeStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>s.scheme.schemeStatus=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]),(0,t.bF)(b,{style:{"padding-left":"20px","padding-right":"20px","padding-top":"20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(g,{span:2},{default:(0,t.k6)((()=>[(0,t.bF)(p,{type:"success",plain:"",onClick:s.handleOpenAddSchemeDialog},{default:(0,t.k6)((()=>[(0,t.eW)("新增方案")])),_:1},8,["onClick"])])),_:1}),(0,t.bF)(g,{span:5},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"请输入方案名称："},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:s.conditions.schemeName,"onUpdate:modelValue":a[5]||(a[5]=e=>s.conditions.schemeName=e),modelModifiers:{lazy:!0},style:{width:"240px"},clearable:"",placeholder:"请输入方案名称"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(b,{style:{"padding-left":"20px","padding-right":"20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(k,{data:s.schemeList,"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},style:{height:"650px"}},{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"index"}),(0,t.bF)(f,{property:"schemeName",label:"方案名称"}),(0,t.bF)(f,{property:"schemeComments",label:"方案备注"}),(0,t.bF)(f,{property:"schemeStatus",formatter:s.schemeStatusFormatter,label:"启用状态"},null,8,["formatter"]),(0,t.bF)(f,{prop:"createTime",formatter:s.dateFormatter,sortable:"",label:"创建时间"},null,8,["formatter"]),(0,t.bF)(f,{prop:"updateTime",formatter:s.dateFormatter,sortable:"",label:"更新时间"},null,8,["formatter"]),(0,t.bF)(f,{fixed:"right",label:"操作"},{default:(0,t.k6)((e=>[(0,t.bF)(p,{link:"",type:"primary",onClick:a=>s.handleOpenEditSchemeDialog(e.row)},{default:(0,t.k6)((()=>[(0,t.eW)(" 编辑 ")])),_:2},1032,["onClick"]),(0,t.bF)(p,{link:"",type:"primary",onClickOnce:a=>s.handleDeleteSchemeById(e.row)},{default:(0,t.k6)((()=>[(0,t.eW)("删除")])),_:2},1032,["onClickOnce"])])),_:1})])),_:1},8,["data"]),(0,t.Lk)("div",o,[(0,t.bF)(y,{"current-page":s.pagingParameters.currentPage,"onUpdate:currentPage":a[6]||(a[6]=e=>s.pagingParameters.currentPage=e),"page-size":s.pagingParameters.pageSize,"onUpdate:pageSize":a[7]||(a[7]=e=>s.pagingParameters.pageSize=e),"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:s.pagingParameters.total,onSizeChange:s.handlePageSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])])),_:1})],64)}var r=l(144),m=l(1219),i=l(5133),c=l(8626),d=l.n(c),u=l(1576),p=l.n(u),h={name:"Scheme",setup(){const e=(0,r.KR)(!1),a=(0,r.KR)("新增方案"),l=(0,r.KR)("UPDATE"),n="140px",o=(0,r.KR)(null),s={id:null,schemeId:null,schemeName:null,schemeComments:null,schemeStatus:!0,createTime:null,updateTime:null},c=(0,r.Kh)(d().cloneDeep(s)),u=(0,r.Kh)({schemeName:null}),h=(0,r.Kh)({currentPage:1,pageSize:10,total:0}),g=(0,r.KR)([]),b=async()=>{const e=await(0,i.R)(h);200==e.code?(g.value=e.data.list,h.total=e.data.total):(0,m.nk)({message:"查询方案列表失败",type:"error",plain:!0})};(0,t.sV)((async()=>{b()}));const f=()=>{e.value=!0,a.value="新增方案",l.value="ADD"},k=async()=>{const a=await(0,i.nA)(c);if("200"===a.data.code){(0,m.nk)({message:"保存方案成功",type:"success",plain:!0}),e.value=!1;const a=d().cloneDeep(s);Object.keys(a).forEach((e=>{c[e]=a[e]})),b()}else(0,m.nk)({message:"保存方案失败",type:"error",plain:!0})},y=()=>{o.value.validate((e=>{e&&k()}))},F=async e=>{const a=await(0,i.Dl)(e.id);"200"===a.data.code?((0,m.nk)({message:"删除方案成功",type:"success",plain:!0}),b()):(0,m.nk)({message:"删除方案失败",type:"error",plain:!0})},C=t=>{e.value=!0,l.value="UPDATE",a.value="编辑方案",Object.keys(t).forEach((e=>{c[e]=t[e]})),c.schemeStatus="0"===c.schemeStatus},S=async()=>{const a=await(0,i.Jj)(c);if("200"===a.data.code){(0,m.nk)({message:"更新方案成功",type:"success",plain:!0}),e.value=!1;const a=d().cloneDeep(s);Object.keys(a).forEach((e=>{c[e]=a[e]})),b()}else(0,m.nk)({message:"更新方案失败",type:"error",plain:!0})},D=()=>{o.value.validate((e=>{e&&S()}))},v=async()=>{b()},w=async()=>{b()},_=(e,a,l)=>"0"===l?"启用":"停用",V=(0,r.Kh)({schemeName:[{required:!0,message:"请输入方案名称",trigger:"blur"},{min:1,max:50,message:"规则名称的长度应该介于1到50之间",trigger:"blur"}]}),x=(e,a,l)=>p()(l).format("YYYY-MM-DD HH:mm:ss");return(0,t.wB)(u,(async(e,a)=>{if(""==e.schemeName.trim())b();else{const e=await(0,i.cf)(h,u);200==e.code?g.value=e.data.list:(0,m.nk)({message:"刷新查询方案列表失败",type:"error",plain:!0})}})),{schemeDialogTableVisible:e,conditions:u,scheme:c,formLabelWidth:n,schemeList:g,handleAddScheme:y,handleDeleteSchemeById:F,pagingParameters:h,handlePageSizeChange:v,handleCurrentChange:w,schemeStatusFormatter:_,handleOpenEditSchemeDialog:C,dialogTitle:a,handleUpdateScheme:D,operateType:l,handleOpenAddSchemeDialog:f,rules:V,schemeFormRef:o,dateFormatter:x}}},g=l(1241);const b=(0,g.A)(h,[["render",s]]);var f=b}}]);
//# sourceMappingURL=336.31fc0c92.js.map