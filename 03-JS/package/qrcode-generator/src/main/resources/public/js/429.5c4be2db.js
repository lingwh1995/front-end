"use strict";(self["webpackChunkqrcode_generator_webui"]=self["webpackChunkqrcode_generator_webui"]||[]).push([[429],{8992:function(e,l,a){a.d(l,{Ao:function(){return i},KZ:function(){return u},Ox:function(){return r},W9:function(){return n},qE:function(){return o},wz:function(){return d}});var t=a(2730);function n(e){return(0,t.A)({url:"/rule",method:"POST",data:e})}function d(e){return(0,t.A)({url:`/rule/for_select/${e}`,method:"GET"})}function r(e){return(0,t.A)({url:`/rule/pagination/${e.currentPage}/${e.pageSize}`,method:"GET"})}function u(e,l){return(0,t.A)({url:`/rule/pagination/${e.currentPage}/${e.pageSize}/${""==l.ruleName?null:l.ruleName}`,method:"GET"})}function o(e){return(0,t.A)({url:`/rule/${e}`,method:"DELETE"})}function i(e){return(0,t.A)({url:"/rule",method:"PUT",data:e})}},3486:function(e,l,a){a.d(l,{F2:function(){return d},yx:function(){return n}});var t=a(2730);function n(e){return(0,t.A)({url:`/rule_field/${e}`,method:"GET"})}function d(e){return(0,t.A)({url:`/rule_field/${e.id}/${e.startSequence}`,method:"PUT"})}},3408:function(e,l,a){a.d(l,{kV:function(){return r},mn:function(){return n},qX:function(){return d},yv:function(){return u}});var t=a(2730);function n(e){return(0,t.A)({url:"/template",method:"POST",data:e})}function d(e,l){return(0,t.A)({url:`/template/pagination/scheme_id/${e.schemeId}/rule_id/${e.ruleId}/current_page/${l.currentPage}/page_size/${l.pageSize}`,method:"GET"})}function r(e){return(0,t.A)({url:`/template/${e}`,method:"DELETE"})}function u(e,l){return(0,t.A)({url:`/template/scheme_id/${e.schemeId}/rule_id/${e.ruleId}/template_type/${l.templateType}`,method:"GET"})}},2781:function(e,l,a){a.d(l,{NG:function(){return t},VP:function(){return d},sS:function(){return n}});const t={FIXED_CONSTANT:{CODE:"0001",NAME:"固定常量"},DROPDOWN_SELECT_INPUT:{CODE:"0002",NAME:"下拉选择"},CASCADER_SELECT_INPUT:{CODE:"0003",NAME:"级联选择 "},COMBINATION_FORMAT_DATA:{CODE:"0004",NAME:"日期类型"},AUTO_INCREMENT_SEQUENCE:{CODE:"0005",NAME:"自增序列"},BAR_CODE_NAME:{CODE:"1001",NAME:"条码名称"}},n={FORM_ITEM_INPUT:{CODE:"0001",NAME:"输入框"},FORM_ITEM_SELECT:{CODE:"0002",NAME:"下拉选择"},FORM_ITEM_CASCADER:{CODE:"0003",NAME:"级联选择"},FORM_ITEM_AUTO_INCREMENT_SEQUENCE:{CODE:"0004",NAME:"自增序列"}},d={GENERATE_TEMPLATE:{CODE:"1",DESC:"生成样式模板"},EXPORT_TEMPLATE:{CODE:"2",DESC:"导出样式模板"}}},3075:function(e,l,a){a.d(l,{G:function(){return d}});var t=a(8626),n=a.n(t);const d=e=>n().cloneDeep(e)},9429:function(e,l,a){a.r(l),a.d(l,{default:function(){return J}});var t=a(6768),n=a(4232);const d={style:{float:"left"}},r={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},u={style:{"margin-top":"10px"}},o={class:"dialog"};function s(e,l,a,i,s,c){const p=(0,t.g2)("el-button"),m=(0,t.g2)("el-col"),b=(0,t.g2)("el-option"),h=(0,t.g2)("el-select"),f=(0,t.g2)("el-form-item"),v=(0,t.g2)("el-checkbox"),g=(0,t.g2)("el-row"),E=(0,t.g2)("el-table-column"),k=(0,t.g2)("el-table"),F=(0,t.g2)("el-pagination"),C=(0,t.g2)("AddOrEditTemplate"),T=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(g,{style:{"padding-left":"20px","padding-right":"20px","padding-top":"20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{span:2},{default:(0,t.k6)((()=>[(0,t.bF)(p,{type:"success",plain:"",onClick:i.handleOpenAddTemplateDialog},{default:(0,t.k6)((()=>[(0,t.eW)("新增模板")])),_:1},8,["onClick"])])),_:1}),(0,t.bF)(m,{span:5},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"选择方案"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:i.conditions.schemeId,"onUpdate:modelValue":l[0]||(l[0]=e=>i.conditions.schemeId=e),placeholder:"请选择方案",onChange:i.handleSchemeOptionsChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.schemeOptions,((e,l)=>((0,t.uX)(),(0,t.Wv)(b,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,t.bF)(m,{span:1}),(0,t.bF)(m,{span:5},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"选择规则"},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:i.conditions.ruleId,"onUpdate:modelValue":l[1]||(l[1]=e=>i.conditions.ruleId=e),placeholder:"请选择条码生成规则",onChange:i.handleRuleOptionsChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.ruleOptions,((l,a)=>((0,t.uX)(),(0,t.Wv)(b,{key:a,label:l.label,value:l.value,disabled:l.disabled},{default:(0,t.k6)((()=>[(0,t.Lk)("span",d,(0,n.v_)(l.label),1),(0,t.Lk)("span",r,[(0,t.bF)(v,{modelValue:l.asDefault,"onUpdate:modelValue":e=>l.asDefault=e,onChange:a=>e.handleDefaultRuleChange(l.value),label:"设为默认规则"},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(g,{style:{"padding-left":"20px","padding-right":"20px"}},{default:(0,t.k6)((()=>[(0,t.bF)(k,{data:i.templateList,"cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center"},style:{height:"650px"}},{default:(0,t.k6)((()=>[(0,t.bF)(E,{type:"index"}),(0,t.bF)(E,{property:"schemeName",label:"方案名称"}),(0,t.bF)(E,{property:"ruleName",label:"规则"}),(0,t.bF)(E,{property:"templateName",label:"规则"}),(0,t.bF)(E,{property:"templateType",formatter:i.templateTypeFormatter,label:"模板类型"},null,8,["formatter"]),(0,t.bF)(E,{property:"templateContent",label:"模板内容"}),(0,t.bF)(E,{property:"templateStatus",formatter:i.templateStatusFormatter,label:"启用状态"},null,8,["formatter"]),(0,t.bF)(E,{prop:"createTime",formatter:i.dateFormatter,sortable:"",label:"创建时间"},null,8,["formatter"]),(0,t.bF)(E,{prop:"updateTime",formatter:i.dateFormatter,sortable:"",label:"更新时间"},null,8,["formatter"]),(0,t.bF)(E,{fixed:"right",label:"操作"},{default:(0,t.k6)((e=>[(0,t.bF)(p,{link:"",type:"primary",onClick:l=>i.handleOpenEditTemplateDialog(e.row)},{default:(0,t.k6)((()=>[(0,t.eW)(" 编辑 ")])),_:2},1032,["onClick"]),(0,t.bF)(p,{link:"",type:"primary",onClickOnce:l=>i.handleDeleteTemplateById(e.row)},{default:(0,t.k6)((()=>[(0,t.eW)("删除")])),_:2},1032,["onClickOnce"])])),_:1})])),_:1},8,["data"]),(0,t.Lk)("div",u,[(0,t.bF)(F,{"current-page":i.pagingParameters.currentPage,"onUpdate:currentPage":l[2]||(l[2]=e=>i.pagingParameters.currentPage=e),"page-size":i.pagingParameters.pageSize,"onUpdate:pageSize":l[3]||(l[3]=e=>i.pagingParameters.pageSize=e),"page-sizes":[5,10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:i.pagingParameters.total,onSizeChange:e.handlePageSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),(0,t.bF)(T,{modelValue:i.addOrEditTemplateDialogVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>i.addOrEditTemplateDialogVisible=e),title:"新增模板",width:"90%",top:"100px"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",o,[(0,t.bF)(C,{barCodesGeneratorDialogVisible:e.barCodesGeneratorDialogVisible},null,8,["barCodesGeneratorDialogVisible"])])])),_:1},8,["modelValue"])])),_:1})],64)}a(4114);var c=a(144),p=a(1219),m=a(5133),b=a(8992),h=a(3408),f=a(1576),v=a.n(f);const g=e=>((0,t.Qi)("data-v-2ec9a249"),e=e(),(0,t.jt)(),e),E={style:{height:"200px",width:"100%","background-color":"antiquewhite"}},k=g((()=>(0,t.Lk)("div",null,[(0,t.Lk)("h1",{style:{"text-align":"left"}},"取值表达式区")],-1))),F={style:{height:"130px",width:"100%",overflow:"scroll"}},C=g((()=>(0,t.Lk)("div",null,"下面的值可以通过表达式来获取",-1))),T=g((()=>(0,t.Lk)("div",{style:{display:"inline-block"}},[(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"------------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"模板序号"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"------------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"模板名称"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"------------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"模板名称取值表达式"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"------------------------------")],-1))),y={style:{display:"inline-block"}},_=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"--------------------------------",-1))),O={class:"bar-code-rule-field-fetch-value-element"},N=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"--------------------------------",-1))),A={class:"bar-code-rule-field-fetch-value-element"},L=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"--------------------------------",-1))),V={class:"bar-code-rule-field-fetch-value-element"},I=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"--------------------------------",-1))),D=g((()=>(0,t.Lk)("div",{style:{display:"inline-block"}},[(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    "),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"    ")],-1))),x=g((()=>(0,t.Lk)("div",{style:{display:"inline-block"}},[(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"字段序号"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"字段名称"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------------------"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"字段取值表达式"),(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------------------")],-1))),S=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------",-1))),R={class:"bar-code-rule-field-fetch-value-element"},w=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------",-1))),P={class:"bar-code-rule-field-fetch-value-element"},M=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------",-1))),$={class:"bar-code-rule-field-fetch-value-element"},U=g((()=>(0,t.Lk)("div",{class:"bar-code-rule-field-fetch-value-element"},"----------------",-1))),K=g((()=>(0,t.Lk)("h1",{style:{"text-align":"center"}},"模板配置区",-1)));function X(e,l,a,d,r,u){const o=(0,t.g2)("el-option"),i=(0,t.g2)("el-select"),s=(0,t.g2)("el-form-item"),c=(0,t.g2)("el-col"),p=(0,t.g2)("el-row"),m=(0,t.g2)("el-input"),b=(0,t.g2)("el-tab-pane"),h=(0,t.g2)("el-tabs"),f=(0,t.g2)("el-button");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:11},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"选择方案"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:d.conditions.schemeId,"onUpdate:modelValue":l[0]||(l[0]=e=>d.conditions.schemeId=e),placeholder:"请选择方案",onChange:d.handleSchemeOptionsChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.schemeOptions,((e,l)=>((0,t.uX)(),(0,t.Wv)(o,{key:l,label:e.label,value:e.value,class:"select-option-height"},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,t.bF)(c,{span:1}),(0,t.bF)(c,{span:11},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"选择规则"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:d.conditions.ruleId,"onUpdate:modelValue":l[1]||(l[1]=e=>d.conditions.ruleId=e),placeholder:"请选择模板生成规则",onChange:d.handleRuleOptionsChange},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.ruleOptions,((e,l)=>((0,t.uX)(),(0,t.Wv)(o,{key:l,label:e.label,value:e.value,disabled:e.disabled,class:"select-option-height"},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,t.bF)(c,{span:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",E,[k,(0,t.Lk)("div",F,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.barCodesInfoFetchValueExpressionList,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{key:l},[(0,t.Lk)("div",null,[C,T,(0,t.Lk)("div",y,[_,(0,t.Lk)("div",O,(0,n.v_)(e.barCodeNameOrder),1),N,(0,t.Lk)("div",A,(0,n.v_)(e.barCodeName),1),L,(0,t.Lk)("div",V,(0,n.v_)(e.barCodeNameFetchValueExpression),1),I]),D,x,((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.barCodeRuleFieldFetchValueExpressionList,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{style:{display:"inline-block"},key:l},[S,(0,t.Lk)("div",R,(0,n.v_)(e.ruleFieldOrder),1),w,(0,t.Lk)("div",P,(0,n.v_)(e.ruleFieldName),1),M,(0,t.Lk)("div",$,(0,n.v_)(e.ruleFieldFetchValueExpression),1),U])))),128))])])))),128))])])])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:24},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[K])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(c,{span:24},{default:(0,t.k6)((()=>[(0,t.bF)(h,{modelValue:d.currentEditTabIndex,"onUpdate:modelValue":l[7]||(l[7]=e=>d.currentEditTabIndex=e),type:"border-card",style:{height:"300px",overflow:"scroll"}},{default:(0,t.k6)((()=>[(0,t.bF)(b,{label:"生成样式模板配置"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"请输入模板名称","label-width":d.labelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:d.templateTypeAndContent.generateTemplate.name,"onUpdate:modelValue":l[2]||(l[2]=e=>d.templateTypeAndContent.generateTemplate.name=e)},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.bF)(s,{label:"请配置生成样式模板","label-width":d.labelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:d.templateTypeAndContent.generateTemplate.content,"onUpdate:modelValue":l[3]||(l[3]=e=>d.templateTypeAndContent.generateTemplate.content=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1}),(0,t.bF)(b,{label:"导出样式模板配置"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"请输入模板名称","label-width":d.labelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:d.templateTypeAndContent.exportTemplate.name,"onUpdate:modelValue":l[4]||(l[4]=e=>d.templateTypeAndContent.exportTemplate.name=e)},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.bF)(s,{label:"请配置导出样式模板-表头","label-width":d.labelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:d.templateTypeAndContent.exportTemplate.content.headers,"onUpdate:modelValue":l[5]||(l[5]=e=>d.templateTypeAndContent.exportTemplate.content.headers=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"]),(0,t.bF)(s,{label:"请配置导出样式模板-表体","label-width":d.labelWidth},{default:(0,t.k6)((()=>[(0,t.bF)(m,{modelValue:d.templateTypeAndContent.exportTemplate.content.fields,"onUpdate:modelValue":l[6]||(l[6]=e=>d.templateTypeAndContent.exportTemplate.content.fields=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{style:{"background-color":"#D4D7DE",height:"50px",position:"relative"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"primary",onClick:d.handleAddTemplate,disabled:e.addBarCodesBatchButtonState,style:{position:"absolute",top:"50%",left:"30%",transform:"translate(-50%, -50%)"}},{default:(0,t.k6)((()=>[(0,t.eW)("保存模板")])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})],64)}var z=a(3486),W=a(3075),G=a(2781),B={name:"AddOrEditTemplate",setup(){const e=(0,c.Kh)(G.VP),l=G.NG,a=(0,c.KR)([]),n=(0,c.KR)([]),d=(0,c.KR)([]),r=(0,c.KR)(1),u=(0,c.Kh)({schemeId:"",schemeName:"",ruleId:"",ruleName:""}),o=(0,c.KR)("180px");(0,t.sV)((async()=>{try{const e=await(0,m.or)(),l=e.data.data;l.forEach((e=>{n.value.push({label:e.schemeName,value:e.schemeId})}))}catch(e){console.log(e)}r.value="0"}));const s=async e=>{a.value=[];const l=n.value.find((l=>l.value===e));u.schemeName=l.label,d.value=[];try{const e=await(0,b.wz)(u.schemeId),l=e.data.data;l.forEach(((e,l)=>{d.value.push({label:e.ruleName,value:e.ruleId})}))}catch(t){console.log(t)}},f=(0,c.KR)([]),v=async e=>{const a=d.value.find((l=>l.value===e));u.ruleName=a.label,f.value=[];try{const e=await(0,z.yx)(u.ruleId),a=e.data.data,t=a[a.length-1].ruleFieldAssociationTabIndex+1;for(let n=0;n<t;n++){const e=a.filter((e=>e.ruleFieldAssociationTabIndex==n)),t={barCodeName:null,barCodeNameOrder:null,barCodeNameFetchValueExpression:null,barCodeRuleFieldFetchValueExpressionList:[]},d=[];for(let a=0;a<e.length;a++){let t={};switch(e[a].ruleFieldCategoryCode){case l.FIXED_CONSTANT.CODE:t={ruleFieldName:e[a].ruleFieldName,ruleFieldOrder:a+1,ruleFieldFetchValueExpression:`#{${n+1}-${a+1}}`};break;case l.DROPDOWN_SELECT_INPUT.CODE:t={ruleFieldName:e[a].ruleFieldName,ruleFieldOrder:i+1,ruleFieldFetchValueExpression:`#{${n+1}-${a+1}}`};break;case l.CASCADER_SELECT_INPUT.CODE:t={ruleFieldName:e[a].ruleFieldName,ruleFieldOrder:a+1,ruleFieldFetchValueExpression:`#{${n+1}-${a+1}}`};break;case l.COMBINATION_FORMAT_DATA.CODE:t={ruleFieldName:e[a].ruleFieldName,ruleFieldOrder:a+1,ruleFieldFetchValueExpression:`#{${n+1}-${a+1}}`};break;case l.AUTO_INCREMENT_SEQUENCE.CODE:t={ruleFieldName:e[a].ruleFieldName,ruleFieldOrder:a+1,ruleFieldFetchValueExpression:`#{${n+1}-${a+1}}`};break;case l.BAR_CODE_NAME.CODE:e[a].ruleFieldValue;t={ruleFieldName:`模板${n+1}名称`,ruleFieldOrder:n+1,ruleFieldFetchValueExpression:`#{barCodeName-${n+1}}`};break;default:t={};break}d.push(t)}const r=d.pop();t.barCodeName=r.ruleFieldName,t.barCodeNameOrder=r.ruleFieldOrder,t.barCodeNameFetchValueExpression=r.ruleFieldFetchValueExpression,t.barCodeRuleFieldFetchValueExpressionList=d,f.value.push(t)}}catch(t){console.log(t)}},g=(0,c.Kh)({generateTemplate:{type:e.GENERATE_TEMPLATE.CODE,name:null,content:null},exportTemplate:{type:e.EXPORT_TEMPLATE.CODE,name:null,content:{headers:null,fields:null}}}),E={id:null,schemeId:null,schemeName:null,ruleId:null,ruleName:null,templateName:null,templateStatus:0,templateType:null,templateContent:null,createTime:null,updateTime:null},k=async()=>{const e=(0,W.G)(E);let l=null,a=null,t=null;switch(r.value){case"0":l=g.generateTemplate.name,a=g.generateTemplate.type,t=g.generateTemplate.content;break;case"1":l=g.exportTemplate.name,a=g.exportTemplate.type,t=JSON.stringify(g.exportTemplate.content);break;default:break}e.schemeId=u.schemeId,e.schemeName=u.schemeName,e.ruleId=u.ruleId,e.ruleName=u.ruleName,e.templateName=l,e.templateType=a,e.templateContent=t;const n=await(0,h.mn)(e);200===n.status?(0,p.nk)({message:"新增模板成功",type:"success",plain:!0}):(0,p.nk)({message:"新增模板失败",type:"error",plain:!0})};return{schemeOptions:n,ruleOptions:d,handleSchemeOptionsChange:s,handleRuleOptionsChange:v,conditions:u,barCodesInfoFetchValueExpressionList:f,templateTypeAndContent:g,currentEditTabIndex:r,handleAddTemplate:k,TemplateEnum:e,labelWidth:o}}},q=a(1241);const Q=(0,q.A)(B,[["render",X],["__scopeId","data-v-2ec9a249"]]);var Y=Q,j={name:"Template",components:{AddOrEditTemplate:Y},setup(){const e=(0,c.Kh)(G.VP),l=(0,c.Kh)({schemeId:null,ruleId:null}),a=(0,c.KR)([]),n=(0,c.KR)([]),d=(0,c.KR)(!1),r=(0,c.KR)([]),u=(0,c.Kh)({currentPage:1,pageSize:10,total:0}),o=async()=>{try{const e=await(0,m.or)(),l=e.data;l.forEach((e=>{a.value.push({label:e.schemeName,value:e.schemeId})}))}catch(e){console.log(e)}},i=async()=>{n.value=[];try{const e=await(0,b.wz)(l.schemeId);if(200==e.code){const l=e.data;l.forEach(((e,l)=>{n.value.push({label:e.ruleName,value:e.ruleId,asDefault:!1})}))}}catch(e){console.log(e)}},s=async()=>{const e=await(0,h.qX)(l,u);200==e.code?(r.value=e.data.list,u.total=e.data.total,(0,p.nk)({message:"刷新模板列表成功",type:"success",plain:!0})):(0,p.nk)({message:"刷新模板列表失败",type:"error",plain:!0})},f=e=>{};(0,t.sV)((async()=>{o(),s()}));const g=()=>{d.value=!0},E=e=>{},k=async e=>{const l=await(0,h.kV)(e.id);200===l.status?((0,p.nk)({message:"删除模板成功",type:"success",plain:!0}),s()):(0,p.nk)({message:"删除模板失败",type:"error",plain:!0})},F=(e,l,a)=>"0"===a?"启用":"停用",C=(l,a,t)=>{const n=Object.keys(e).filter((l=>t==e[l].CODE));return e[n[0]].DESC},T=(e,l,a)=>v()(a).format("YYYY-MM-DD HH:mm:ss");return{conditions:l,handleSchemeOptionsChange:i,handleRuleOptionsChange:f,schemeOptions:a,ruleOptions:n,addOrEditTemplateDialogVisible:d,handleOpenAddTemplateDialog:g,pagingParameters:u,handleOpenEditTemplateDialog:E,handleDeleteTemplateById:k,templateStatusFormatter:F,templateList:r,dateFormatter:T,templateTypeFormatter:C,TemplateEnum:e}}};const H=(0,q.A)(j,[["render",s],["__scopeId","data-v-5e057bd6"]]);var J=H}}]);
//# sourceMappingURL=429.5c4be2db.js.map